# 命令

- [命令](#命令)
  - [Linux手册](#linux手册)
    - [节名](#节名)
    - [内容区域](#内容区域)
    - [其他方式](#其他方式)
  - [文件和目录列表](#文件和目录列表)
    - [ls](#ls)
      - [文件时间](#文件时间)
      - [ls参数用法](#ls参数用法)
  - [处理文件](#处理文件)
    - [touch](#touch)
    - [cp](#cp)
      - [cp参数用法](#cp参数用法)
    - [ln](#ln)
      - [符号链接](#符号链接)
      - [硬链接](#硬链接)
      - [ln参数用法](#ln参数用法)
    - [mv](#mv)
      - [mv参数用法](#mv参数用法)
    - [rm](#rm)
      - [rm参数用法](#rm参数用法)
  - [处理目录](#处理目录)
    - [mkdir](#mkdir)
      - [mkdir参数用法](#mkdir参数用法)
    - [rmdir](#rmdir)
      - [rmdir参数用法](#rmdir参数用法)
  - [查看文件内容](#查看文件内容)
    - [file](#file)
    - [cat](#cat)
      - [cat参数用法](#cat参数用法)
    - [more](#more)
      - [more内部命令](#more内部命令)
    - [less](#less)
      - [less内部命令](#less内部命令)
    - [tail](#tail)
      - [tail参数用法](#tail参数用法)
    - [head](#head)
      - [head参数用法](#head参数用法)

## Linux手册

- 查找包含关键字的内容，并列出所有匹配的手册页条目

``` shell
man -l keyword
```

### 节名

| 节            | 描述                   |
| ------------- | ---------------------- |
| Name          | 命令名和简介           |
| Synopsis      | 命令的语法             |
| Configuration | 命令配置信息           |
| Description   | 命令的一般性描述       |
| Options       | 命令的选项描述         |
| Exit Status   | 命令的退出状态指示     |
| Return Value  | 命令的返回值           |
| Errors        | 命令的错误信息         |
| Environment   | 描述所使用的环境变量   |
| Files         | 命令用到的文件         |
| Versions      | 命令的版本信息         |
| Conforming To | 命名所遵从的标准       |
| Notes         | 其他有帮助的资料       |
| Bugs          | 提供提交bug的途径      |
| Example       | 展示命令的用法         |
| Authors       | 命令开发人员的信息     |
| Copyright     | 命令源代码的版权状况   |
| See Also      | 与该命令类似的其他命令 |

### 内容区域

- man通常提供的是命令所对应的最低编号的内容。
- 有的命令会在多个内容区域有对应手册页
- 查看对应部分的手册页

``` shell
man section command
```

| 区域号 | 描述                     |
| ------ | ------------------------ |
| 1      | 可执行程序或shell命令    |
| 2      | 系统调用                 |
| 3      | 库调用                   |
| 4      | 特殊文件                 |
| 5      | 文件格式与约定           |
| 6      | 游戏                     |
| 7      | 概览，约定及杂项         |
| 8      | 超级用户和系统管理员命令 |
| 9      | 内核例程                 |

### 其他方式

1. info
2. -help/--help

## 文件和目录列表

- 会话从主目录开始，主目录时分配给用户账户的一个特有目录，用户在创建之后系统通常会为其分配一个特有的目录。
- 文件名以.开头的是隐藏文件，不会在默认的ls命令输出中显示出来，linux通常采用隐藏文件来保存配置信息

### ls

- 长格式内容
  - 文件类型，目录(d)，文件(-)，字符型文件(c),块设备(b)
  - 文件权限
  - 文件的硬链接总数
  - 文件拥有者的用户名
  - 文件拥有组的组名
  - 文件大小(字节为单位)、
  - 文件的上次修改时间，mtime
  - 文件名或目录名
- 默认显示的是修改时间，可以通过--time=atime将其改为访问数据
- 文件拓展匹配指的是使用通配符进行模式匹配的国产。
- 通配符，元字符通配符
  - ?表示一个字符
  - *表示零个或多个字符
  - [],[ab]表示一个字符是ab中的一个，[a-z]表示一个字符是a-z中间的一个，[!a]表示除a以外的字符

#### 文件时间

|简称|解释|
|-|-|
|atime|访问时间|
|ctime|变化时间|
|mtime|修改时间|

#### ls参数用法

| 参数 | 描述                                         |
| ---- | -------------------------------------------- |
| -F   | 在目录后添加/，在可执行文件后加*             |
| -a   | 将隐藏文件和普通文件目录一起显示             |
| -R   | 递归选项，列出当前目录下包含的子目录中的文件 |
| -l   | 以长格式出书，包含了更多信息                 |
| -d| 只列出目录的信息，不列出内容 |
| --time=atime | 显示文件的访问时间 |
| -i | 查看inode编号，是用于标识文件或目录的的唯一数字|
| -h | 将文件大小以易读的方式显示|

## 处理文件

### touch

- 创建指定的新文件，并将当前用户名作为文件的属主。创建的是空文件，文件的大小为0
- touch后接一个已有的文件名可以改变文件的修改时间，而不会改变文件内容，同时会修改访问时间

### cp

- 目标文件已经存在时默认覆盖
- 复制默认略过目录
- cp会改变文件的访问时间和变化时间

#### cp参数用法

| 参数 | 描述 |
| ---- | ---- |
|  -i  |  强制询问是否覆盖已有文件  |
| -R,-r | 递归复制整个目录的文件|

### ln

- 符号链接
- 链接是目录中指向文件真实位置的占位符
- 只能对处于同一存储媒体的文件创建硬链接，否则只能创建符号链接
- 使用readlink -f可以查找一系列链接文件的最终目标。

#### 符号链接

- 是一个指向存放在虚拟目录结构中某个地方的另一个文件，两个文件通过符号链接在一起，彼此的内容不相同。
- 创建符号链接时，源文件必须存在
- ls -l 可以查看符号链接的目标
- 源文件与符号链接文件的inode编号和大小都不同，是两个文件

#### 硬链接

- 会创建独立的虚拟文件，其中包含了原始文件的信息及位置，从根本上讲是同一个文件。
- 相当于是文件系统层面的符号链接
- 硬链接文件与源文件的inode编号相同，是同一个文件

#### ln参数用法

| 参数 | 描述 |
| ---- | ---- |
|  -s  |  创建符号链接  |

### mv

- 不改变inode编号和修改时间
- mv默认覆盖已有文件

#### mv参数用法

| 参数 | 描述 |
| ---- | ---- |
| -i | 询问是否覆盖已有文件 |

### rm

- base shell没有回收站和垃圾箱

#### rm参数用法

| 参数 | 描述 |
| ---- | ---- |
| -i | 询问是否真的删除该文件，多文件删除时会依次询问 |
| -r | 递归删除文件以及文件夹，先进入文件夹删除内容最后删除本身 |
| -f| 强制删除 |

## 处理目录

### mkdir

- 创建目录时需要父目录存在

#### mkdir参数用法

| 参数 | 描述 |
| ---- | ---- |
| -p | 同时创建多个目录和子目录 |
| -v | 输出创建信息 |
|-m,--mode=???|设置文件权限|

### rmdir

- 默认只能删除空目录

#### rmdir参数用法

| 参数 | 描述 |
| ---- | ---- |
| -p | 递归删除路径上的空目录 |

## 查看文件内容

### file

- 显示文件的类型，以及文件信息
- 显示符号链接的目标文件，硬链接不会显示
- 对二进制文件使用时能确定该程序编译时所面向的平台以及需要的库类型。

### cat

- 显示文本内容

#### cat参数用法

| 参数 | 描述 |
| ---- | ---- |
| -n | 给所有行加上行号 |
| -b | 只给有内容的行加上行号 |
| -T| 使用^T替换文本中所有制表符 |

### more

- 分页工具，按页显示文本内容
- 只支持文本文件中的基本移动

#### more内部命令

| 参数 | 描述 |
| ---- | ---- |
| Enter,Space | 向下滚动一页 |
| b | 向上滚动一页 |
| j | 向下滚动一行 |
| k | 向上滚动一行 |
| g | 跳转到文件开头 |
| G | 跳转到文件结尾 |

### less

#### less内部命令

| 参数 | 描述 |
| ---- | ---- |
| Space,Page Down | 向下滚动一页 |
| Page Up | 向上滚动一页 |
| j | 向下滚动一行 |
| k | 向上滚动一行 |
| / | 搜索字符串，使用n向下寻找 |
| ? | 搜索字符串，使用n向上查找 |
| g | 跳转到文件开头 |
| G | 跳转到文件结尾 |

### tail

- 查看文件最后几行的内容
- 默认显示末尾10行

#### tail参数用法

| 参数 | 描述 |
| ---- | ---- |
| -n | 显示的行数 |
| -f | 允许在其他进程使用该文件时查看文件内容，会不断保持活动状态，并不断显示添加到文件的内容 |

### head

- 显示文件开头几行的内容

#### head参数用法

| 参数 | 描述 |
| ---- | ---- |
| -n | 显示的行数 |
